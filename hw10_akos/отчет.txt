

1. Цель работы
Разработать многопоточную программу на языке C с использованием библиотеки pthread, моделирующую асинхронную обработку данных:
– 100 источников генерируют целые числа от 1 до 100 с задержкой 1–7 сек;
– числа поступают в общий буфер;
– отслеживающий поток извлекает по два числа и передаёт их сумматору;
– сумматор (в отдельном потоке) вычисляет сумму за 3–6 сек и возвращает результат в буфер;
– процесс повторяется до получения одного финального числа — суммы всех исходных значений.

2. Описание реализации

2.1. Структуры данных
– Использован кольцевой буфер с фиксированной ёмкостью (200 элементов).
– Буфер защищён мьютексом и использует условную переменную для синхронизации.
– Глобальные счётчики:
    • numbers_processed — число отправленных в буфер исходных чисел (ожидается 100);
    • results_generated — число выполненных суммирований (ожидается 99);
    • флаг all_processed — сигнал завершения вычислений.

2.2. Потоки
– 100 потоков-источников: генерируют число, спят 1–7 сек, добавляют в буфер.
– 1 отслеживающий поток: постоянно проверяет, есть ли в буфере ≥2 элемента; если да — извлекает пару и запускает сумматор.
– Динамически создаются потоки-сумматоры (до 50 одновременно в пике); каждый:
    • получает два числа,
    • спит 3–6 сек (имитация вычислений),
    • возвращает сумму в буфер.

2.3. Синхронизация
– Все операции с буфером защищены мьютексом.
– Условные переменные позволяют потокам ждать:
    • свободного места (при записи),
    • появления двух элементов (при чтении).
– Глобальный мьютекс защищает доступ к счётчикам и флагу завершения.

3. Логирование
– Каждое событие логируется в консоль с временной меткой вида [ЧЧ:ММ:СС.мс].
– В логе фиксируются:
    • запуск и завершение источников и сумматоров,
    • добавление/извлечение чисел,
    • текущее состояние буфера (периодически).
– Вывод сериализован через глобальный мьютекс, чтобы избежать перемешивания строк.

4. Условие завершения
Вычисления завершаются, когда:
– все 100 чисел отправлены в буфер,
– выполнено 99 суммирований,
– в буфере остался ровно один элемент.
В этот момент выводится финальный результат, и основной поток завершает программу.
